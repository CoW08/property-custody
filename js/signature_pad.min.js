class SimpleSignaturePad{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.isDrawing=!1,this.points=[],this.strokeStyle="#111827",this.lineWidth=2,this._hasSignature=!1,this._cachedDataUrl=null,this.resizeCanvas(),this.attachEvents()}resizeCanvas(){const t=this.canvas;if(t.width=t.offsetWidth||600,t.height=t.offsetHeight||220,this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,t.width,t.height),this._hasSignature&&this._cachedDataUrl)this._restoreFromDataUrl(this._cachedDataUrl)}attachEvents(){this.handlePointerDown=this.startDraw.bind(this),this.handlePointerMove=this.draw.bind(this),this.handlePointerUp=this.endDraw.bind(this),this.canvas.addEventListener("pointerdown",this.handlePointerDown),window.addEventListener("pointerup",this.handlePointerUp),this.canvas.addEventListener("pointermove",this.handlePointerMove),this.canvas.addEventListener("pointerleave",this.handlePointerUp),window.addEventListener("resize",()=>this.resizeCanvas())}startDraw(t){t.preventDefault(),this.isDrawing=!0,this.points=[this.getPoint(t)],this.ctx.strokeStyle=this.strokeStyle,this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round"}draw(t){if(this.isDrawing){t.preventDefault();const e=this.getPoint(t);this.points.push(e);const i=this.points[this.points.length-2];this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(e.x,e.y),this.ctx.stroke(),this._hasSignature=!0,this._cachedDataUrl=null}}endDraw(t){t&&t.preventDefault(),this.isDrawing=!1,this.points=[]}getPoint(t){const e=this.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}clear(){this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this._hasSignature=!1,this._cachedDataUrl=null}isEmpty(){return!this._hasSignature}toDataURL(){if(this.isEmpty())return null;const t=this.canvas.toDataURL("image/png");return this._cachedDataUrl=t,t}_restoreFromDataUrl(t){const e=new Image;e.onload=()=>{this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height)},e.src=t}}window.SimpleSignaturePad=SimpleSignaturePad;
